<body data-typography="poppins" data-theme-version="light" data-sidebar-style="full" data-layout="horizontal"
    data-nav-headerbg="color_1" data-headerbg="color_1" data-sibebarbg="color_1" data-sidebar-position="fixed"
    data-header-position="fixed" data-container="wide" direction="ltr" data-primary="color_1">

    <!-- Preloader -->


    <!-- Main wrapper -->
    <div id="main-wrapper" class="show">
        <!-- Nav header -->
        <div class="nav-header">
            <a href="http://localhost/wjhtak-site/public/admin/dashboard" class="brand-logo">
                <img class="logo-abbr"
                    src="http://localhost/wjhtak-site/public/images/settings/1769770408_site_logo.png" alt=""
                    style="max-height: 50px;">
                <span class="brand-title"
                    style="font-size: 18px; font-weight: 600; margin-left: 10px; color: #3b4bd3;">ماي تريب</span>
            </a>
            <div class="nav-control">
                <div class="hamburger">
                    <span class="line"></span><span class="line"></span><span class="line"></span>
                </div>
            </div>
        </div>

        <!-- Header -->
        <div class="header">
            <div class="header-content">
                <nav class="navbar navbar-expand">
                    <div class="collapse navbar-collapse justify-content-between">
                        <div class="header-left">
                            <div class="dashboard_bar">
                                Dashboard </div>
                        </div>
                        <div class="nav-item d-flex align-items-center">
                            <div class="input-group search-area">
                                <input type="text" class="form-control" placeholder="">
                                <span class="input-group-text"><a href="javascript:void(0)"><i
                                            class="flaticon-381-search-2"></i></a></span>
                            </div>
                        </div>
                        <ul class="navbar-nav header-right">

                            <li class="nav-item dropdown notification_dropdown">
                                <a class="nav-link" href="javascript:void(0);" role="button" data-bs-toggle="dropdown">
                                    <img src="http://localhost/wjhtak-site/public/images/flags/sa.png" width="20"
                                        alt="">
                                    <span class="ms-1 d-none d-sm-inline-block">العربية</span>
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <a href="http://localhost/wjhtak-site/public/lang/en" class="dropdown-item ai-icon">
                                        <img src="http://localhost/wjhtak-site/public/images/flags/gb.png" width="15"
                                            alt="">
                                        <span class="ms-2">الإنجليزية</span>
                                    </a>
                                    <a href="http://localhost/wjhtak-site/public/lang/ar" class="dropdown-item ai-icon">
                                        <img src="http://localhost/wjhtak-site/public/images/flags/sa.png" width="15"
                                            alt="">
                                        <span class="ms-2">العربية</span>
                                    </a>
                                </div>
                            </li>

                            <li class="nav-item dropdown notification_dropdown">
                                <a class="nav-link" href="javascript:void(0);">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="26.309" height="23.678"
                                        viewBox="0 0 26.309 23.678">
                                        <path id="Path_1955" data-name="Path 1955"
                                            d="M163.217,78.043a7.409,7.409,0,0,1,10.5-10.454l.506.506.507-.506a7.409,7.409,0,0,1,10.5,10.454L175.181,88.686a1.316,1.316,0,0,1-1.912,0Zm11.008,7.823,9.1-9.632.027-.027a4.779,4.779,0,1,0-6.759-6.757l-1.435,1.437a1.317,1.317,0,0,1-1.861,0l-1.437-1.437a4.778,4.778,0,0,0-6.758,6.757l.026.027Z"
                                            transform="translate(-161.07 -65.42)" fill="#135846" fill-rule="evenodd">
                                        </path>
                                    </svg>
                                </a>
                            </li>

                            <li class="nav-item dropdown header-profile">
                                <a class="nav-link" href="javascript:void(0);" role="button" data-bs-toggle="dropdown">
                                    <img src="http://localhost/wjhtak-site/public/images/profile/pic1.jpg" width="20"
                                        alt="">
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">
                                    <a href="http://localhost/wjhtak-site/public/profile" class="dropdown-item ai-icon">
                                        <svg id="icon-user2" xmlns="http://www.w3.org/2000/svg" class="text-primary"
                                            width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                                            <circle cx="12" cy="7" r="4"></circle>
                                        </svg>
                                        <span class="ms-2">الملف الشخصي </span>
                                    </a>
                                    <form method="POST" action="http://localhost/wjhtak-site/public/logout">
                                        <input type="hidden" name="_token"
                                            value="PtuQ32wJTGN0XPCOfG07TEA4i2SZopNmjVUcfQ4m" autocomplete="off"> <button
                                            type="submit" class="dropdown-item ai-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" class="text-danger" width="18"
                                                height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                                                stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                                <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                                                <polyline points="16 17 21 12 16 7"></polyline>
                                                <line x1="21" y1="12" x2="9" y2="12"></line>
                                            </svg>
                                            <span class="ms-2">تسجيل الخروج </span>
                                        </button>
                                    </form>
                                </div>
                            </li>
                        </ul>
                    </div>
                </nav>
            </div>
        </div>


        <!-- Sidebar -->
        <div class="dlabnav">
            <div class="dlabnav-scroll mm-active ps">
                <ul class="metismenu mm-show" id="menu">
                    <li class="nav-label">القائمة الرئيسية</li>
                    <li>
                        <a href="http://localhost/wjhtak-site/public/admin/dashboard" aria-expanded="false">
                            <i class="flaticon-025-dashboard"></i>
                            <span class="nav-text">لوحة التحكم</span>
                        </a>
                    </li>

                    <li class="nav-label">Settings</li>
                    <li>
                        <a href="http://localhost/wjhtak-site/public/admin/settings" aria-expanded="false">
                            <i class="flaticon-381-settings-2"></i>
                            <span class="nav-text">Platform Settings</span>
                        </a>
                    </li>
                    <li class="nav-label">الأمن والوصول</li>
                    <li class="mm-active">
                        <a href="http://localhost/wjhtak-site/public/admin/users" aria-expanded="false"
                            class="mm-active">
                            <i class="flaticon-050-info"></i>
                            <span class="nav-text">إدارة المستخدمين</span>
                        </a>
                    </li>

                    <li>
                        <a href="http://localhost/wjhtak-site/public/admin/roles" aria-expanded="false">
                            <i class="flaticon-381-settings"></i>
                            <span class="nav-text">الأدوار</span>
                        </a>
                    </li>

                    <li>
                        <a href="http://localhost/wjhtak-site/public/admin/permissions" aria-expanded="false">
                            <i class="flaticon-381-lock"></i>
                            <span class="nav-text">الصلاحيات</span>
                        </a>
                    </li>


                    <li class="nav-label">Content Management</li>
                    <li>
                        <a class="has-arrow" href="javascript:void(0)" aria-expanded="false">
                            <i class="flaticon-381-globe"></i>
                            <span class="nav-text">Locations</span>
                        </a>
                        <ul aria-expanded="false" class="mm-collapse" style="">
                            <li><a href="http://localhost/wjhtak-site/public/admin/countries">Countries</a></li>
                            <li><a href="http://localhost/wjhtak-site/public/admin/cities">Cities</a></li>
                        </ul>
                    </li>
                    <li>
                        <a href="http://localhost/wjhtak-site/public/admin/banners" aria-expanded="false">
                            <i class="flaticon-381-picture"></i>
                            <span class="nav-text">Banners</span>
                        </a>
                    </li>


                    <li class="nav-label">إدارة الحجوزات</li>
                    <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="flaticon-045-heart"></i>
                            <span class="nav-text">الفنادق</span>
                        </a>
                        <ul aria-expanded="false" class="mm-collapse" style="">
                            <li><a href="http://localhost/wjhtak-site/public/admin/bookings/hotels">قائمة وموقع
                                    الفنادق</a></li>
                            <li><a href="http://localhost/wjhtak-site/public/admin/bookings/hotels/requests">طلبات حجز
                                    الفنادق</a></li>
                        </ul>
                    </li>
                    <li>
                        <a class="has-arrow" href="javascript:void()" aria-expanded="false">
                            <i class="flaticon-041-graph"></i>
                            <span class="nav-text">الرحلات</span>
                        </a>
                        <ul aria-expanded="false" class="mm-collapse" style="">
                            <li><a href="http://localhost/wjhtak-site/public/admin/bookings/flights/available">الرحلات
                                    المتوفرة</a></li>
                            <li><a href="http://localhost/wjhtak-site/public/admin/bookings/flights/requests">طلبات حجز
                                    وطيران</a></li>
                            <li><a href="http://localhost/wjhtak-site/public/admin/bookings/flights/ongoing">التذاكر
                                    والرحلات الجارية</a></li>
                        </ul>
                    </li>
                </ul>

                <div class="copyright text-center">
                    <p><strong>My Trip Admin</strong> © 2026 All Rights Reserved</p>
                </div>
                <div class="ps__rail-x" style="left: 0px; bottom: 0px;">
                    <div class="ps__thumb-x" tabindex="0" style="left: 0px; width: 0px;"></div>
                </div>
                <div class="ps__rail-y" style="top: 0px; right: 0px;">
                    <div class="ps__thumb-y" tabindex="0" style="top: 0px; height: 0px;"></div>
                </div>
            </div>
        </div>


        <!-- Content body -->
        <div class="content-body" style="min-height: 930px;">
            <div class="container-fluid">

                <!-- Display flash messages -->


                <!-- Main content -->
                <div class="container-fluid">
                    <div class="row page-titles">
                        <ol class="breadcrumb">
                            <li class="breadcrumb-item active"><a href="javascript:void(0)">Admin</a></li>
                            <li class="breadcrumb-item"><a href="javascript:void(0)">Users</a></li>
                        </ol>
                    </div>


                    <div class="row">
                        <div class="col-12">
                            <div class="card fade-in-up">
                                <div class="card-header">
                                    <h4 class="card-title">إدارة المستخدمين</h4>
                                    <button type="button" class="btn btn-primary" data-bs-toggle="modal"
                                        data-bs-target="#addUserModal" onclick="resetForm()">
                                        <i class="fa fa-plus me-2"></i> Add User
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <div id="users-table_wrapper" class="dataTables_wrapper no-footer">
                                            <div class="dataTables_length" id="users-table_length"><label>Show <select
                                                        name="users-table_length" aria-controls="users-table" class="">
                                                        <option value="10">10</option>
                                                        <option value="25">25</option>
                                                        <option value="50">50</option>
                                                        <option value="100">100</option>
                                                    </select> entries</label></div>
                                            <div id="users-table_filter" class="dataTables_filter"><label>Search:<input
                                                        type="search" class="" placeholder=""
                                                        aria-controls="users-table"></label></div>
                                            <div id="users-table_processing" class="dataTables_processing"
                                                style="display: none;">Processing...</div>
                                            <table id="users-table" class="display dataTable no-footer"
                                                style="min-width: 845px; width: 1395px;" role="grid"
                                                aria-describedby="users-table_info">
                                                <thead>
                                                    <tr role="row">
                                                        <th class="sorting_asc" tabindex="0" aria-controls="users-table"
                                                            rowspan="1" colspan="1"
                                                            aria-label="Photo: activate to sort column descending"
                                                            aria-sort="ascending" style="width: 172.75px;">Photo</th>
                                                        <th class="sorting" tabindex="0" aria-controls="users-table"
                                                            rowspan="1" colspan="1"
                                                            aria-label="User Info: activate to sort column ascending"
                                                            style="width: 235.75px;">User Info</th>
                                                        <th class="sorting" tabindex="0" aria-controls="users-table"
                                                            rowspan="1" colspan="1"
                                                            aria-label="Phone: activate to sort column ascending"
                                                            style="width: 178.75px;">Phone</th>
                                                        <th class="sorting" tabindex="0" aria-controls="users-table"
                                                            rowspan="1" colspan="1"
                                                            aria-label="الحالة: activate to sort column ascending"
                                                            style="width: 163.75px;">الحالة</th>
                                                        <th class="sorting" tabindex="0" aria-controls="users-table"
                                                            rowspan="1" colspan="1"
                                                            aria-label="Verification: activate to sort column ascending"
                                                            style="width: 283.75px;">Verification</th>
                                                        <th class="sorting_disabled" rowspan="1" colspan="1"
                                                            aria-label="Actions" style="width: 202.75px;">Actions</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr class="odd">
                                                        <td valign="top" colspan="6" class="dataTables_empty">No data
                                                            available in table</td>
                                                    </tr>
                                                </tbody>
                                            </table>
                                            <div class="dataTables_info" id="users-table_info" role="status"
                                                aria-live="polite">Showing 0 to 0 of 0 entries</div>
                                            <div class="dataTables_paginate paging_simple_numbers"
                                                id="users-table_paginate"><a class="paginate_button previous disabled"
                                                    aria-controls="users-table" data-dt-idx="0" tabindex="0"
                                                    id="users-table_previous">Previous</a><span></span><a
                                                    class="paginate_button next disabled" aria-controls="users-table"
                                                    data-dt-idx="1" tabindex="0" id="users-table_next">Next</a></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- View User Modal -->
                <div class="modal fade" id="viewUserModal">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">User Profile</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <div class="modal-body" id="viewUserBody">
                                <!-- Data loaded via AJAX -->

                            </div>
                        </div>
                    </div>
                </div>

                <!-- <form action="http://localhost/wjhtak-site/public/admin/users" method="POST">
    <input type="hidden" name="_token" value="PtuQ32wJTGN0XPCOfG07TEA4i2SZopNmjVUcfQ4m" autocomplete="off">
    <button type="submit" class="btn btn-primary">
        Add User
    </button>
</form> -->

                <!-- Add User Modal -->
                <div class="modal fade" id="addUserModal">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Add User</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <form id="addUserForm">
                                <input type="hidden" name="_token" value="PtuQ32wJTGN0XPCOfG07TEA4i2SZopNmjVUcfQ4m"
                                    autocomplete="off">
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">الاسم الأول</label>
                                            <input type="text" name="first_name" class="form-control" required="">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">اسم العائلة</label>
                                            <input type="text" name="last_name" class="form-control" required="">
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">البريد الإلكتروني</label>
                                        <input type="email" name="email" class="form-control" required="">
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Code</label>
                                            <input type="text" name="country_code" class="form-control"
                                                placeholder="+1">
                                        </div>
                                        <div class="col-md-8 mb-3">
                                            <label class="form-label">Phone</label>
                                            <input type="text" name="phone" class="form-control">
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">City</label>
                                        <input type="text" name="city" class="form-control">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">الحالة</label>
                                        <select name="status" class="form-control" required="">
                                            <option value="active">Active</option>
                                            <option value="inactive">Inactive</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">Password</label>
                                        <input type="password" name="password" class="form-control">
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger light"
                                        data-bs-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-primary">Add User</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>

                <!-- Edit User Modal -->
                <div class="modal fade" id="editUserModal">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title">Edit User</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>
                            <form id="editUserForm">
                                <input type="hidden" name="_token" value="PtuQ32wJTGN0XPCOfG07TEA4i2SZopNmjVUcfQ4m"
                                    autocomplete="off"> <input type="hidden" name="_method" value="PUT"> <input
                                    type="hidden" id="edit_user_id">
                                <div class="modal-body">
                                    <div class="row">
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">الاسم الأول</label>
                                            <input type="text" name="first_name" id="edit_first_name"
                                                class="form-control" required="">
                                        </div>
                                        <div class="col-md-6 mb-3">
                                            <label class="form-label">اسم العائلة</label>
                                            <input type="text" name="last_name" id="edit_last_name" class="form-control"
                                                required="">
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">البريد الإلكتروني</label>
                                        <input type="email" name="email" id="edit_email" class="form-control"
                                            required="">
                                    </div>
                                    <div class="row">
                                        <div class="col-md-4 mb-3">
                                            <label class="form-label">Code</label>
                                            <input type="text" name="country_code" id="edit_country_code"
                                                class="form-control" placeholder="+1">
                                        </div>
                                        <div class="col-md-8 mb-3">
                                            <label class="form-label">Phone</label>
                                            <input type="text" name="phone" id="edit_phone" class="form-control">
                                        </div>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">City</label>
                                        <input type="text" name="city" id="edit_city" class="form-control">
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">الحالة</label>
                                        <select name="status" id="edit_status" class="form-control" required="">
                                            <option value="active">Active</option>
                                            <option value="inactive">Inactive</option>
                                        </select>
                                    </div>
                                    <div class="mb-3">
                                        <label class="form-label">New Password (leave blank to keep current)</label>
                                        <input type="password" name="password" class="form-control">
                                    </div>
                                </div>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-danger light"
                                        data-bs-dismiss="modal">Close</button>
                                    <button type="submit" class="btn btn-primary">Update Changes</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                <script>
                    var usersDataUrl = "http://localhost/wjhtak-site/public/admin/users/data";
                    let updateUserUrl = "http://localhost/wjhtak-site/public/admin/users/:id";
                    let toggleStatusUrlTemplate = "http://localhost/wjhtak-site/public/admin/users/:id/toggle-status";
                </script>
                <script>
                    let usersTable;
                    $(document).ready(function () {
                        usersTable = $('#users-table').DataTable({
                            processing: true,
                            serverSide: false, // Set to true if huge data
                            ajax: usersDataUrl,
                            columns: [
                                { data: 'photo' },
                                { data: 'info' },
                                { data: 'phone' },
                                { data: 'status' },
                                { data: 'verified' },
                                { data: 'actions', orderable: false, searchable: false }
                            ],
                            language: {
                                "url": "http://localhost/wjhtak-site/public/vendor/datatables/i18n/ar.json"
                            }
                        });

                        $.get("http://localhost/wjhtak-site/public/admin/users/data", function (response) {
                            console.log('Full Response from Controller:', response);

                            // تحقق من أن response.data موجودة
                            if (response.data && Array.isArray(response.data)) {
                                response.data.forEach(user => {
                                    console.log('User ID:', user.id);
                                    console.log('Name:', user.name);
                                    console.log('Email:', user.email);
                                    console.log('Phone:', user.phone);
                                    console.log('---'); // للفصل بين المستخدمين
                                });
                            } else {
                                console.log('No data found or wrong JSON format');
                            }
                        });

                        $('#addUserForm').on('submit', function (e) {
                            e.preventDefault();
                            $.ajax({
                                url: "http://localhost/wjhtak-site/public/admin/users",
                                type: "POST",
                                data: $(this).serialize(),
                                success: function (response) {
                                    if (response.success) {
                                        console.log(response);
                                        $('#addUserModal').modal('hide');
                                        $('#addUserForm')[0].reset();
                                        usersTable.ajax.reload(null, false);
                                        toastr.success(response.message);
                                    }
                                },
                                error: function (xhr) {
                                    if (xhr.status === 422) {
                                        let errors = xhr.responseJSON.errors;
                                        Object.values(errors).forEach(err => {
                                            toastr.error(err[0]);
                                        });
                                    } else {
                                        toastr.error('Something went wrong');
                                    }
                                }
                            });
                        });
                        // Handle Edit Form Submit
                        $('#editUserForm').on('submit', function (e) {
                            e.preventDefault();
                            const id = $('#edit_user_id').val();
                            const url = updateUserUrl.replace(':id', id);
                            const formData = $(this).serialize() + '&_method=PUT';

                            $.ajax({
                                url: url,
                                method: 'POST',
                                data: formData,
                                success: function (response) {
                                    if (response.success) {
                                        $('#editUserModal').modal('hide');
                                        usersTable.ajax.reload();
                                        toastr.success(response.message);
                                    }
                                },
                                error: function (xhr) {
                                    if (xhr.status === 422) {
                                        let errors = xhr.responseJSON.errors;
                                        Object.keys(errors).forEach(key => {
                                            toastr.error(errors[key][0]);
                                        });
                                    } else {
                                        toastr.error('Something went wrong');
                                    }
                                }
                            });
                        });

                    });


                    function viewUser(id) {
                        let url = "http://localhost/wjhtak-site/public/admin/users/:id";
                        url = url.replace(':id', id);
                        $.get(url, function (response) {
                            if (response.success) {
                                const user = response.user;
                                const html = `
                    <div class="row">
                        <div class="col-md-4 text-center">
                            <img src="${response.photo_url}" class="img-fluid rounded shadow mb-3" style="max-width: 150px;">
                        </div>
                        <div class="col-md-8">
                            <table class="table table-bordered table-striped">
                                <tr><th>الاسم الأول</th><td>${user.first_name}</td></tr>
                                <tr><th>اسم العائلة</th><td>${user.last_name}</td></tr>
                                <tr><th>البريد الإلكتروني</th><td>${user.email}</td></tr>
                                <tr><th>Phone</th><td>${user.country_code ? user.country_code + ' ' : ''}${user.phone || '---'}</td></tr>
                                <tr><th>City</th><td>${user.city || '---'}</td></tr>
                                <tr><th>Country</th><td>${user.country || '---'}</td></tr>
                                <tr><th>Address</th><td>${user.address || '---'}</td></tr>
                                <tr><th>Gender</th><td>${user.gender || '---'}</td></tr>
                                <tr><th>Birthday</th><td>${user.date_of_birth || '---'}</td></tr>
                                <tr><th>Joined</th><td>${response.created_at}</td></tr>
                            </table>
                        </div>
                    </div>
                `;
                                $('#viewUserBody').html(html);
                                $('#viewUserModal').modal('show');
                            }
                        });
                    }



                    function editUser(id) {
                        let url = "http://localhost/wjhtak-site/public/admin/users/:id";
                        url = url.replace(':id', id);

                        $.get(url, function (response) {
                            console.log(response);

                            if (response.success) {
                                const user = response.user;
                                $('#edit_user_id').val(user.id);
                                $('#edit_first_name').val(user.first_name);
                                $('#edit_last_name').val(user.last_name);
                                $('#edit_email').val(user.email);
                                $('#edit_country_code').val(user.country_code);
                                $('#edit_phone').val(user.phone);
                                $('#edit_city').val(user.city);
                                $('#edit_status').val(user.status);
                                $('#editUserModal').modal('show');
                            }
                        });
                    }

                    function toggleUserStatus(id) {
                        const url = "http://localhost/wjhtak-site/public/admin/users/:id/toggle-status".replace(':id', id);
                        Swal.fire({
                            title: 'Are you sure?',
                            text: 'Do you want to toggle this user status?',
                            icon: 'warning',
                            showCancelButton: true,
                            confirmButtonColor: '#3085d6',
                            cancelButtonColor: '#d33',
                            confirmButtonText: 'Yes, Change it!'
                        }).then((result) => {
                            if (result.value) {
                                $.ajax({
                                    url: url,
                                    method: 'POST',
                                    data: {
                                        _token: $('meta[name="csrf-token"]').attr('content')
                                    },
                                    success: function (response) {
                                        if (response.success) {
                                            usersTable.ajax.reload();
                                            toastr.success(response.message);
                                        }
                                    }
                                });
                            }
                        });
                    }

                    function deleteUser(id) {
                        let url = "http://localhost/wjhtak-site/public/admin/users/:id";
                        url = url.replace(':id', id);
                        Swal.fire({
                            title: 'Delete Account?',
                            text: 'This action cannot be undone!',
                            icon: 'error',
                            showCancelButton: true,
                            confirmButtonColor: '#d33',
                            cancelButtonColor: '#3085d6',
                            confirmButtonText: 'Yes, delete it!'
                        }).then((result) => {
                            if (result.value) {
                                $.ajax({
                                    url: url,
                                    method: 'POST',
                                    data: {
                                        _token: 'PtuQ32wJTGN0XPCOfG07TEA4i2SZopNmjVUcfQ4m',
                                        _method: 'DELETE'
                                    },
                                    success: function (response) {
                                        if (response.success) {
                                            usersTable.ajax.reload();
                                            toastr.success(response.message);
                                        }
                                    }
                                });
                            }
                        });
                    }
                </script>

            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <div class="copyright">
                <p>Copyright © Designed &amp; Developed by <a href="http://localhost/wjhtak-site/public"
                        target="_blank">My Trip Team</a> 2026</p>
            </div>
        </div>

    </div>

    <!-- Vite JS -->
    <script type="module" src="http://[::1]:5173/@vite/client"></script>
    <script type="module" src="http://[::1]:5173/resources/js/app.js"></script>
    <!-- Custom Admin JS -->
    <script src="http://localhost/wjhtak-site/public/js/admin-custom.js"></script>



</body>